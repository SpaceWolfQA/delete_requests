# Delete Requests
Набор запросов для очистки тестовых данных через API. Удаляет пользователей, метрики, фичи и планы на препроде или тестовых стендов

## Установка и запуск
1. Установить необходимые зависимости из requirements.txt:
   ```
   pip install -r requirements.txt
   ```

2. Создать файл .env на основе примера (.env example):
   ```
   BILLING_URL = "https://billing_url_example.com"
   PLATFORM_URL = "https://platform_url_example.com"
   HEADERS = {"Authorization": "Bearer UANPwoeJodv3NETHo9AQ2tig669nHzfL"}
   ```
3. Выбрать необходимый файл для удаления пользователя/метрики/фичи/плана и запустить его.

## Конфигурация
### Перменные окружения
| Параметр | Описание | Пример |
|----------|----------|---------|
| `BILLING__URL` | Базовый URL препрода или тестовых стендов биллинга | `https://billing_url_example.com` |
| `PLATFORM_URL` | Базовый URL препрода платформы | `https://platform_url_example.com` |
| `HEADERS` | заголовки с токеном авторизации для отправки в запросах | `{"Authorization": "Bearer UANPwoeJodv3NETHo9AQ2tig669nHzfL"}` |

## Функциональность
- **Удаление пользователей** (`delete_test_client`) - удаление тестовых пользователей;
- **Удаление метрик** (`delete_test_metric`) - удаление тестовых метрик;
- **Удаление фич** (`delete_test_feature`) - удаление тестовых фич;
- **Удаление планов** (`delete_test_plans`) - удаление тарифных планов.

## Важно!
Использовать исключительно на препроде или тестовых стендах. На тестовых стендах невозможно (пока что) удалять тестовых пользователей.

## Возможные ошибки
- При удалении фич, по которым создан расход, в ответе от сервера приходит ошибка - это нормальное поведение;
- Возможны ошибки при удалении планов, которые сейчас активны (подключены у пользователей).
